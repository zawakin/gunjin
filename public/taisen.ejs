<!DOCTYPE html>

<html lang="ja" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title><%=title %></title>
    <link href="css/gunjin1_0.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>   
    <script tyep="text/javascript" src="js/jquery-ui.min.js"></script>
    <script type="text/javascript" src="js/GunjinShogiProgram.js"></script>
    <script type="text/javascript" src="js/gunjin1_0.js"></script>
</head>
<body>
    

    <h1 id="roomNum"><%= roomNum%></h1>
    <div id="nameinput">
        <label>名前を入力してください</label>
        <form name="nameform" onsubmit="NameFormEvent(); return false;" >
            <input id="name" type="text" />
        </form>
    </div>

    <div id="waiting" style="display:none;">
        <h1>対戦者が来るのを待っています...</h1>
    </div>

    <div id="battlestart" style="display:none;">
        <h1>対戦者が決定しました</h1>
        <div>
            <label>先手：</label>
            <label id="sente"></label><br />
            <label>後手：</label>
            <label id="gote"></label>
        </div>
    </div>

    <div id="battlejunbi" style="display:none;">
        <header>
            初期配置を決めてください。
        </header>

        <article>
            <!--  <div id="draggable" style="width:500px;height:500px;background-color:green;"></div>-->
            <div style="display:none;">
                <canvas class="cell" width="67" height="67"></canvas>
                <canvas class="shireibu cell" width="135" height="67"></canvas>
                <canvas class="emphasis" width="67" height="67"></canvas>
            </div>
            <button id="change"><h1>ボードを初期化</h1></button>
            <div id="board">
                <canvas id="field" width="412" height="626"></canvas>

            </div>

            <div id="komadai">
                <!-- ここに2x12のcanvasを配置して駒の画像を表示する -->
            </div>
        </article>

        <footer>
            ©hoge
        </footer>
    </div>

    <div id="battle" style="display:none;">

    </div>
    <div id="battlefinish" style="display:none;">


    </div>

    <script>
        
        var stage = 0;
        var waiting = false;

        var socket = io();
        var roomNum = document.getElementById("roomNum").textContent;
        

        function NameFormEvent() {
            var name = document.forms.nameform.name.value;
           
            var data = { name: name ,roomNum:roomNum};
            console.log(data);
            socket.emit("taisenmachi", data);
            $("#nameinput").hide();
            $("#waiting").show();
            waiting = true;
        };

        socket.on("taisenKettei", function (room) {

            if (waiting) {

                

                $("#waiting").hide();
                $("#sente").text(room.sente.name);
                $("#gote").text(room.gote.name);
                $("#battlestart").show();

                window.setTimeout(function (roomInfo) {
                    $("#battlestart").hide();
                    $("#battlejunbi").show();
                }, 1000, room
                );

            }
        });

        
    </script>
</body>
</html>